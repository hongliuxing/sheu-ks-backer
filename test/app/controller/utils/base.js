"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const bootstrap_1 = require("egg-mock/bootstrap");
const mytoken = 'eyJkYXRhIjp7ImlkIjoiMzk1N2UxNjAtZWEzZi0xMWU4LTk1ODYtYzE1YjcxY2I3ZGQ1In0sImNyZWF0ZWQiOjI1ODEwNjc0LCJleHAiOjUxODQwMH0=.6Ek45TNBaUS3/2JgGHb8PI8Ax1aot8mWJH9E1t67VU8=';
// const otherToken = 'eyJkYXRhIjp7ImlkIjoiMjYxOTE0ZDAtZjE5MS0xMWU4LWFhMzAtNjdjNDBkYmE0MjMzIn0sImNyZWF0ZWQiOjI1Nzc5MTg0LCJleHAiOjUxODQwMH0=.1GPSHUpaU/QvHhtMZAf4nq/eIRMCL9b+7lvK88s4WKw=';
const headers = {
    'x-access-token': mytoken,
};
const toHttp = ({ method, query }) => new Promise((resolve, reject) => {
    const opts = {
        dataType: 'json',
    };
    // console.log('【HTTP Execute】 method ===> ', method);
    if (method === 'get') {
        bootstrap_1.app.httpRequest().get(`/graphql?${query}`, opts).set(headers).then(resolve).catch(reject);
    }
    else if (method === 'post') {
        bootstrap_1.app.httpRequest().post(`/graphql`, opts).send({ query }).set(headers).then(resolve).catch(reject);
    }
    else {
        reject({ msg: 'method is bad!' });
    }
});
exports.toGet = (query) => toHttp({ method: 'get', query });
exports.toPost = (query) => toHttp({ method: 'post', query });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJhc2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxrREFBeUM7QUFFekMsTUFBTSxPQUFPLEdBQUcsbUtBQW1LLENBQUM7QUFDcEwsMExBQTBMO0FBRTFMLE1BQU0sT0FBTyxHQUFHO0lBQ1osZ0JBQWdCLEVBQUUsT0FBTztDQUM1QixDQUFDO0FBRUYsTUFBTSxNQUFNLEdBQUcsQ0FBQyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7SUFDbEUsTUFBTSxJQUFJLEdBQUc7UUFDVCxRQUFRLEVBQUUsTUFBTTtLQUNuQixDQUFDO0lBQ0Ysc0RBQXNEO0lBQ3RELElBQUksTUFBTSxLQUFLLEtBQUssRUFBRTtRQUNsQixlQUFHLENBQUMsV0FBVyxFQUFFLENBQUMsR0FBRyxDQUFDLFlBQVksS0FBSyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDN0Y7U0FBTSxJQUFJLE1BQU0sS0FBSyxNQUFNLEVBQUU7UUFDMUIsZUFBRyxDQUFDLFdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUMsS0FBSyxFQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUNuRztTQUFNO1FBQ0gsTUFBTSxDQUFDLEVBQUMsR0FBRyxFQUFFLGdCQUFnQixFQUFDLENBQUMsQ0FBQztLQUNuQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRVUsUUFBQSxLQUFLLEdBQUcsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFDLENBQUMsQ0FBQztBQUNsRCxRQUFBLE1BQU0sR0FBRyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFDIn0=